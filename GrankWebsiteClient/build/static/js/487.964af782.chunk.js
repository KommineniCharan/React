"use strict";(self.webpackChunkmr_creative=self.webpackChunkmr_creative||[]).push([[487],{2487:function(e,n,l){l.r(n),l.d(n,{default:function(){return k}});var i=l(72791),t=l(29439),o=l(89078),a=l(30439),r=l(24709),s=l(90977),d=l(41286),u=(0,i.createContext)({}),c=l(5289),m=l(65661),v=l(39157),h=l(1413),f=l(81153),x=l(64554),Z=l(76989),p=l(55705),j=l(8007),b=l(45363),C=l(50168),g=l(82626),U=l(28524),_=l(80184),w=j.Ry().shape({name:j.Ry({first:j.Z_().min(3,"too short"),last:j.Z_().min(3,"too short")}),mobile:j.Z_().required("mobile is required").matches(/[0-9]{10}$/,"mobile must be 10 digit"),email:j.Z_().email(),password:j.Z_().min(5,"tooshort"),role:j.Z_(),avatar:j.Z_(),idDoc:j.Z_(),dob:j.hT(),address:j.Ry({street:j.Z_(),city:j.Z_(),country:j.Z_(),pincode:j.Z_()})}),y=function(){var e=(0,i.useContext)(u),n=e.initialUser,l=e.handleDialogClose,t=e.operation,o=e.loadUsers;return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(p.J9,{initialValues:(0,h.Z)({name:{first:"",last:""},mobile:"",email:"",password:"",status:1,role:"admin"},n),validationSchema:w,onSubmit:function(e){var n,i,a=new FormData;if(a.append("name.first",null===(n=e.name)||void 0===n?void 0:n.first),a.append("name.last",null===(i=e.name)||void 0===i?void 0:i.last),e.address)for(var s in e.address)a.append("address.".concat(s),e.address[s]);var d=["name","_id","address","createdAt"];for(var u in e)d.includes(u)||a.append(u,e[u]);"edit"==t?r.Z.updateUser(e._id,a).then((function(e){alert("User Updated..."),l(),o(),console.log(e.data.data)})).catch((function(e){alert("User not  Updated..."),console.error(e)})):r.Z.createUser(a).then((function(e){alert("User Created..."),l(),o()})).catch((function(e){alert("User Not  Created..."),console.error(e)}))},children:function(e){var n,i,o,r,s=e.values,d=e.touched,u=e.errors,c=e.handleBlur,m=e.handleChange,v=e.handleSubmit;return(0,_.jsx)(x.Z,{component:"form",onSubmit:v,children:(0,_.jsxs)(f.ZP,{container:!0,spacing:2,children:[(0,_.jsx)(f.ZP,{item:!0,xs:12,md:6,children:(0,_.jsx)(Z.Z,{fullWidth:!0,variant:"outlined",label:"First Name",name:"name.first",value:s.name.first,onChange:m,onBlur:c,error:!!(null!==d&&void 0!==d&&d.name&&null!==d&&void 0!==d&&d.name.first&&null!==u&&void 0!==u&&null!==(n=u.name)&&void 0!==n&&n.first),helperText:(null===d||void 0===d?void 0:d.name)&&(null===d||void 0===d?void 0:d.name.first)&&(null===u||void 0===u||null===(i=u.name)||void 0===i?void 0:i.first)})}),(0,_.jsx)(f.ZP,{item:!0,xs:12,md:6,children:(0,_.jsx)(Z.Z,{fullWidth:!0,variant:"outlined",label:"Last Name",name:"name.last",value:s.name.last,onChange:m,onBlur:c,error:!!(null!==d&&void 0!==d&&d.name&&null!==d&&void 0!==d&&d.name.last&&null!==u&&void 0!==u&&null!==(o=u.name)&&void 0!==o&&o.last),helperText:(null===d||void 0===d?void 0:d.name)&&(null===d||void 0===d?void 0:d.name.last)&&(null===u||void 0===u||null===(r=u.name)||void 0===r?void 0:r.last)})}),(0,_.jsx)(f.ZP,{item:!0,xs:12,children:(0,_.jsx)(Z.Z,{fullWidth:!0,variant:"outlined",label:"Mobile",name:"mobile",value:s.mobile,onChange:m,onBlur:c,error:!(null===d||void 0===d||!d.mobile||null===u||void 0===u||!u.mobile),helperText:(null===d||void 0===d?void 0:d.mobile)&&(null===u||void 0===u?void 0:u.mobile)})}),(0,_.jsx)(f.ZP,{item:!0,xs:12,children:(0,_.jsx)(Z.Z,{fullWidth:!0,variant:"outlined",label:"Email",name:"email",value:s.email,onChange:m,onBlur:c,error:!(null===d||void 0===d||!d.email||null===u||void 0===u||!u.email),helperText:(null===d||void 0===d?void 0:d.email)&&(null===u||void 0===u?void 0:u.email)})}),(0,_.jsx)(f.ZP,{item:!0,xs:12,children:(0,_.jsx)(Z.Z,{fullWidth:!0,variant:"outlined",label:"Password",name:"password",type:"password",value:s.password,onChange:m,onBlur:c,error:!(null===d||void 0===d||!d.password||null===u||void 0===u||!u.password),helperText:(null===d||void 0===d?void 0:d.password)&&(null===u||void 0===u?void 0:u.password)})}),(0,_.jsx)(f.ZP,{item:!0,xs:12,md:6,children:(0,_.jsxs)(b.Z,{fullWidth:!0,children:[(0,_.jsx)(C.Z,{id:"role",children:"Roles"}),(0,_.jsxs)(U.Z,{labelId:"role",id:"demo-simple-select",value:s.role,label:"Role",onChange:m,children:[(0,_.jsx)(g.Z,{value:"admin",children:"Admin"}),(0,_.jsx)(g.Z,{value:"other",children:"Other"})]})]})}),(0,_.jsx)(f.ZP,{item:!0,xs:12,md:6,children:(0,_.jsxs)(b.Z,{fullWidth:!0,children:[(0,_.jsx)(C.Z,{id:"status",children:"Status"}),(0,_.jsxs)(U.Z,{labelId:"status",id:"demo-simple-select",value:s.status,label:"Status",name:"status",onChange:m,children:[(0,_.jsx)(g.Z,{value:1,children:"Active"}),(0,_.jsx)(g.Z,{value:0,children:"Inactive"})]})]})}),(0,_.jsxs)(f.ZP,{item:!0,xs:12,container:!0,justifyContent:"space-evenly",children:[(0,_.jsx)(a.Z,{type:"submit",variant:"contained",color:"primary",children:"edit"==t?"Update":"Create"}),(0,_.jsx)(a.Z,{onClick:l,variant:"contained",color:"secondary",children:"Close"})]})]})})}})})},B=function(){var e=(0,i.useContext)(u),n=e.openDialog,l=void 0!==n&&n,t=e.operation,o=e.handleDialogClose;e.initialUser;return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(c.Z,{fullWidth:!0,maxWidth:"md",open:l,onClose:o,children:[(0,_.jsxs)(m.Z,{children:["edit"==t?"Edit":"Add"," User"]}),(0,_.jsx)(v.Z,{children:(0,_.jsx)(y,{})})]})})},A=l(21830),P=l.n(A),S=l(27247),D=function(){var e=(0,i.useState)([]),n=(0,t.Z)(e,2),l=n[0],c=n[1],m=(0,i.useState)(!1),v=(0,t.Z)(m,2),h=v[0],f=v[1],x=(0,i.useState)("add"),Z=(0,t.Z)(x,2),p=Z[0],j=Z[1],b=(0,i.useState)(),C=(0,t.Z)(b,2),g=C[0],U=C[1],w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"?role=admin";r.Z.fetchAllUser(e).then((function(e){var n;c(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data)})).catch((function(e){console.error(e)}))};i.useEffect((function(){w()}),[]);var y=[{label:"ID",name:"userId",options:{sort:!0,filter:!1}},{label:"Name",name:"name",options:{sort:!0,filter:!1,customBodyRenderLite:function(e){var n,i,t=l[e];return"".concat(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.first," ").concat(null===t||void 0===t||null===(i=t.name)||void 0===i?void 0:i.last)}}},{label:"Mobile",name:"mobile",options:{sort:!0,filter:!1}},{label:"Email",name:"email",options:{sort:!0,filter:!1}},{label:"Role",name:"role",options:{sort:!0,filter:!1}},{label:"Status",name:"status",options:{sort:!0,filter:!1,customBodyRenderLite:function(e){return 1==l[e].status?"Active":"InActive"}}},{label:"Actions",name:"action",options:{sort:!0,filter:!1,customBodyRenderLite:function(e){var n=l[e];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(s.Z,{color:"primary",onClick:function(){return function(e){U(e),j("edit"),f(!0)}(n)},children:(0,_.jsx)(d.Z,{})}),(0,_.jsx)(s.Z,{color:"error",onClick:function(){return e=n._id,void P().fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(n){n.isConfirmed&&r.Z.deleteUser(e).then((function(e){w(),P().fire("Deleted!","User has been deleted.","success")})).catch((function(e){console.log(e),P().fire("Not Deleted!","User has not been deleted.","error")}))}));var e},children:(0,_.jsx)(S.default,{})})]})}}}];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(a.Z,{variant:"contained",onClick:function(){return U({}),f(!0),void j("add")},sx:{backgroundColor:"#ccc"},children:"Admin Add"}),(0,_.jsx)(o.ZP,{title:"Admin list",data:l,columns:y}),(0,_.jsx)(u.Provider,{value:{openDialog:h,operation:p,handleDialogClose:function(){f(!1)},initialUser:g,loadUsers:w},children:(0,_.jsx)(B,{})})]})},k=function(){return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(D,{})})}}}]);
//# sourceMappingURL=487.964af782.chunk.js.map